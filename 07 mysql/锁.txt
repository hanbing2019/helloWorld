InnoDB锁的粒度
行锁：锁住数据行，粒度比表锁小，加锁的效率低（要找到锁住的数据行）
表锁：锁住整个表，粒度比行锁大，加锁的效率高（直接锁表就可以了）


行锁包括了，共享锁，排他锁
共享锁
lock in share mode,多事务可以读取
排他锁
for update

表锁
意向共享锁：在给行数据加共享锁时，增加一个意向共享锁
意向排他锁：在给行数据加排他锁时，增加一个意向排他锁

在加表锁的，判断是否已经添加了行锁，不用去扫描表
只需要判断是否存在意向锁就能够判断出是否加表示，从而提升了加表锁的效率

锁：锁住的是索引
当表没有索引的时候怎么办

主键索引为聚集索引
没有显示定义主键时使用唯一索引
如果也没有这样的唯一索引，则 InnoDB 会选择内置 6 字节长的 ROWID 作
为隐藏的聚集索引，它会随着行记录的写入而主键递增



记录锁：在等值查询时，查询到了结果，就用记录锁来锁住这个记录
间隙锁：没有查询记录到时候，使用间隙锁，锁住间隙
临建锁：范围查找找到了记录，就将记录和左边的间隙全都锁住

这样repeatable read就避免了幻读




select * from information_schema.INNODB_TRX





